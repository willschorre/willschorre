<doctype! html>

<html>
<head>

<title>
wowwsynth
</title>
</head>
<body>
    <div id="aux" style=" color: blue; font-size: 33pt; white-space: pre-wrap; width: 500px; margin:auto; word-break: break-all; padding: 20px; overflow: wrap;">

    	<button onclick="play()">DoIt</button>
    	
    		<script>
    alert('This is a webpage synthesizer which synthesizes the word "wow" with some variation');
	(function play(){
	//audio context
    var audio = new (window.AudioContext || window.webkitAudioContext)();
	//make white noise... code clipped from "noisehack"
	var whiteNoise = audio.createScriptProcessor(bufferSize, 1, 1);
	whiteNoise.onaudioprocess = function(e) {
    var output = e.outputBuffer.getChannelData(0);
    for (var i = 0; i < bufferSize; i++) {
        output[i] = Math.random() * 2 - 1;
    	}
	}
	var bufferSize = 4096;
	//make osc gains and filters
	osc = audio.createOscillator();
	gainO= audio.createGain();
	gainN= audio.createGain();
	filter1 = audio.createBiquadFilter();
	filter2 = audio.createBiquadFilter();
	filter3 = audio.createBiquadFilter();
	filter1.type = "bandpass";
	filter2.type = "bandpass";
	filter3.type = "bandpass";

	//params
	osc.type= "sawtooth";
	osc.start(0);
	//connects
	whiteNoise.connect(gainN);
	osc.connect(gainO);
	gainO.connect(filter1);
	gainO.connect(filter2);
	gainO.connect(filter3);
	gainN.connect(filter1);
	filter1.connect(audio.destination);
	filter2.connect(audio.destination);
	filter3.connect(audio.destination);
	//initialize vals
	osc.frequency.value = 50;
	gainO.gain.value = 0;
	gainN.gain.value = 0;
	filter1.frequency.value = 360;
	filter2.frequency.value = 640;
	filter3.frequency.value = 280;
	filter1.Q.value = 10	;
	filter2.Q.value = 20;
	filter3.Q.value = 17;
	setInterval(function(){
	var height = Math.random() - .5 * 50;
	var time2 = Math.random() * 0.4 + .1;
	var time3 = Math.random() * 0.4 + .6;
	var i = audio.currentTime;
	gainN.gain.setValueAtTime(0, i)
	gainN.gain.linearRampToValueAtTime(.20, i + .25)
	gainN.gain.linearRampToValueAtTime(0.0000001, i + .6)
	gainO.gain.setValueAtTime(0, i + .05)
	gainO.gain.linearRampToValueAtTime(.85, i + time2)
	gainO.gain.linearRampToValueAtTime(0.001, i + time3)
	filter1.frequency.setValueAtTime(260 + height, i + .001)
	filter2.frequency.setValueAtTime(640 + height, i + .002)
	filter3.frequency.setValueAtTime(280 + height, i + .003)
	filter1.frequency.linearRampToValueAtTime(800 + height, i + time2)
	filter2.frequency.linearRampToValueAtTime(1340 + height, i + time2)
	filter3.frequency.linearRampToValueAtTime(190 + height, i + time2)
	filter1.frequency.linearRampToValueAtTime(160 + height, i + time3)
	filter2.frequency.linearRampToValueAtTime(640 + height, i + time3)
	filter3.frequency.linearRampToValueAtTime(280 + height, i + time3)
	osc.frequency.setValueAtTime(Math.random() * 500 + 10, i)
	osc.frequency.linearRampToValueAtTime(Math.random() * 200 + 10, i + Math.random() * .6)
	osc.frequency.linearRampToValueAtTime(Math.random() * 100 + 10, i + 1)
	// a few of these variables changed on 4-4-18
	document.getElementById('aux').innerHTML += 'wow                       ';
	}, 3000);
	})();
	</script>
    </div>
</body>
